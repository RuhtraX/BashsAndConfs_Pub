#!/bin/bash
if [ -n "$1" ] && [ -n "$2" ] && [ -n "$3" ] ; then
	oldName="$1"
	name="$2"
	typeset -i num="$3"
else
 	if [ -n "$1" ] && [ -n "$2" ] ; then
		oldName="mpv"
		name="$1"
		typeset -i num="$2"
	else
		echo "Usage for renaming mpv*.jpg files:"
		echo "	rename [newName] [number to start counting]"
		echo "or for renaming oldName*.jpg files:"
		echo "	rename [oldName] [newName] [number]"
		echo "if number = 0 I'll detect it automatically"
		exit 1
	fi
fi
if [ $num == 0 ] ; then
	typeset -i num=`ls $name*.jpg | awk 'END{print $1}' | grep -o --color=never '[1-9][0-9]*' | tail -1`
	num=$num+1
fi
for i in "$oldName"*.jpg ; do
	if (( $num < 10 )); then
		mv -i "$i" "$name-0$num.jpg"
		if (( $? != 0 )); then
			exit 2
		fi
	else
		mv -i "$i" "$name-$num.jpg"
		if (( $? != 0 )); then
			exit 2
		fi
	fi
	num=$num+1
done
exit 0

